<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ title }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <style>
    :root {
      --primary: #12355b;
      --primary-dark: #0a2540;
      --line: #dbe5f0;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Segoe UI", Tahoma, Arial, sans-serif;
      background:
        radial-gradient(circle at 8% 10%, rgba(255, 122, 24, 0.16), transparent 36%),
        radial-gradient(circle at 90% 18%, rgba(31, 122, 140, 0.18), transparent 36%),
        #edf2f7;
      color: #0f172a;
    }

    .topbar {
      background: linear-gradient(120deg, var(--primary), var(--primary-dark));
      color: #fff;
      padding: 12px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      flex-wrap: wrap;
    }

    .brand {
      font-weight: 700;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .actions {
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-bar {
      border: 1px solid rgba(255, 255, 255, 0.22);
      color: #fff;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 10px;
      padding: 8px 12px;
      font-size: 13px;
      font-weight: 600;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-bar:hover {
      color: #fff;
      background: rgba(255, 255, 255, 0.16);
    }

    .wrap {
      width: min(760px, 94vw);
      margin: 20px auto;
    }

    .card-box {
      background: #fff;
      border: 1px solid var(--line);
      border-radius: 16px;
      box-shadow: 0 14px 30px rgba(15, 23, 42, 0.1);
      padding: 18px;
    }

    .title {
      margin: 0 0 14px;
      font-size: 25px;
      font-weight: 800;
    }

    .err-box {
      border-left: 4px solid #dc2626;
      background: #fef2f2;
      border-radius: 10px;
      padding: 12px 14px;
      margin-bottom: 14px;
      color: #991b1b;
      font-size: 14px;
    }

    .err-box ul {
      margin: 0;
      padding-left: 18px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .field.full {
      grid-column: 1 / -1;
    }

    .field label {
      font-size: 13px;
      font-weight: 700;
      color: #475569;
    }

    .field input,
    .field select {
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px 11px;
      font-size: 14px;
      background: #fbfdff;
      width: 100%;
    }

    .field input:focus,
    .field select:focus {
      outline: none;
      border-color: #7aa2d4;
      box-shadow: 0 0 0 3px rgba(18, 53, 91, 0.1);
    }

    .check {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      color: #334155;
      margin-top: 6px;
    }

    .check input {
      width: 16px;
      height: 16px;
      accent-color: #1d4ed8;
    }

    .actions-row {
      margin-top: 14px;
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .btn-main {
      border: 0;
      border-radius: 10px;
      padding: 10px 14px;
      font-weight: 700;
      background: linear-gradient(120deg, #1d4ed8, #0ea5e9);
      color: #fff;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }

    .btn-light {
      border: 1px solid #dbe5f0;
      border-radius: 10px;
      padding: 10px 14px;
      font-weight: 700;
      background: #fff;
      color: #0f172a;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    @media (max-width: 700px) {
      .grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <i class="fas fa-user-gear"></i>
      <span>{{ title }}</span>
    </div>
    <div class="actions">
      <a class="btn-bar" href="{% url 'licenses:user_list' %}"><i class="fas fa-users"></i>Users</a>
      <a class="btn-bar" href="{% url 'licenses:dashboard' %}"><i class="fas fa-gauge"></i>Dashboard</a>
    </div>
  </header>

  <main class="wrap">
    <section class="card-box">
      <h1 class="title">{{ title }}</h1>

      {% if errors %}
        <div class="err-box">
          <ul>
            {% for err in errors %}
              <li>{{ err }}</li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}

      <form method="post">
        {% csrf_token %}
        <div class="grid">
          <div class="field">
            <label>Username</label>
            <input type="text" name="username" value="{{ form.username }}" required>
          </div>

          <div class="field">
            <label>Email</label>
            <input type="email" name="email" value="{{ form.email }}">
          </div>

          <div class="field">
            <label>Role</label>
            <select name="role" required>
              <option value="admin" {% if form.role == "admin" %}selected{% endif %}>Admin</option>
              <option value="supervisor" {% if form.role == "supervisor" %}selected{% endif %}>Supervisor</option>
              <option value="cashier" {% if form.role == "cashier" %}selected{% endif %}>Cashier</option>
            </select>
          </div>

          <div class="field">
            <label>Password {% if mode == "edit" %}(optional){% endif %}</label>
            <input type="password" name="password" {% if mode == "create" %}required{% endif %}>
          </div>

          <div class="field full">
            <label>Confirm Password {% if mode == "edit" %}(only if changing password){% endif %}</label>
            <input type="password" name="confirm_password" {% if mode == "create" %}required{% endif %}>
          </div>
        </div>

        <label class="check">
          <input type="checkbox" name="is_active" {% if form.is_active %}checked{% endif %}>
          <span>User is active</span>
        </label>

        <div class="actions-row">
          <button class="btn-main" type="submit">
            <i class="fas fa-floppy-disk"></i>{{ submit_label }}
          </button>
          <a class="btn-light" href="{% url 'licenses:user_list' %}">
            <i class="fas fa-arrow-left"></i>Back
          </a>
        </div>
      </form>
    </section>
  </main>
</body>
</html>
